#/etc/nginx/sites-available

##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# http://wiki.nginx.org/Pitfalls
# http://wiki.nginx.org/QuickStart
# http://wiki.nginx.org/Configuration
#
# Generally, you will want to move this file somewhere, and start with a clean
# file but keep this around for reference. Or just disable in sites-enabled.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

# Default server configuration
#
server {
    listen         8000; 
    #server_name    127.0.0.1
    charset UTF-8;
    access_log      /var/log/nginx/caliperserver_access.log;
    error_log       /var/log/nginx/caliperserver_error.log;

    client_max_body_size 1024M;

    location / { 
#        root /mydata/www; 
        uwsgi_send_timeout 600;        # 指定向uWSGI传送请求的超时时间，完成握手后向uWSGI传送请求的超时时间。
        uwsgi_connect_timeout 600;   # 指定连接到后端uWSGI的超时时间。
        uwsgi_read_timeout 600;        # 指定接收uWSGI应答的超时时间，完成握手后接收uWSGI应答的超时时间。
        include uwsgi_params;
#	uwsgi_pass unix:///tmp/caliperserver.sock;
        uwsgi_pass 127.0.0.1:8003;
    }   
    location /static {
        expires 30d;
        autoindex on; 
        add_header Cache-Control private;
#        alias /opt/CaliperServer/caliperserver/resources/common_static/;
        alias /opt/CaliperServer/caliperserver/static/;
     }
    location /upload {
	expires 30d;
	autoindex on;
	add_header Cache-Control private;
	alias /opt/CaliperServer/data/upload/;
    }
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
#server {
#	listen 80;
#	listen [::]:80;
#
#	server_name example.com;
#
#	root /var/www/example.com;
#	index index.html;
#
#	location / {
#		try_files $uri $uri/ =404;
#	}
#}
