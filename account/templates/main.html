<!DOCTYPE html>
<html>
{% load staticfiles %}
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Caliper</title>

    {% include "script.html" %}
    <style>
        html, body {
            padding: 0;
            margin: 0;
            height: 100%;
        }

        #app {
            height: 100%;
            background-image: url('/static/image/main_bg.jpg');
            background-repeat: no-repeat;
            background-size: cover;

        }

        a {
            font-size: 16px;
            color: #fff;
            margin-right: 40px;
        }

        .top {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(65, 65, 65, 0.68);
            z-index: 1;

        }

        .content {
            display: inline-block;
            min-width: 1280px;
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 2
        }

        .header {
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            padding-top: 10px;
        }

        .center {
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            align-items: center;
            margin-right: 15%;
            margin-top: 20%
        }

    </style>

</head>
<body>

<div id="app">
    <div class="top"></div>
    <div class="content">
        <div class="header">

            <a href="{% static 'links/introduction.html' %}"
               target="_blank">Introduction</a>
            <a href="{% static 'links/setup.html' %}" target="_blank">Set up</a>
            <a href="{% static 'links/guivideo.html' %}" target="_blank">GUI
                Video</a>
            <a href="{% static 'links/benchmark.html' %}"
               target="_blank">Benchmark</a>
            <a href="https://github.com/open-estuary/caliper" target="_blank">View
                Source
                Code</a>
            <Dropdown trigger="click" style="margin-right: 20px" @on-click="download">
                <a style="color: #fff;" href="javascript:void(0)">
                    Download Caliper
                    <icon type="arrow-down-b"></icon>
                </a>
                <Dropdown-Menu slot="list">
                    <Dropdown-Item :name="v.version" v-for="(v,index) in versions"><a
                            style="color: #495060;font-size: 12px!important"
                            :href="'user/download?version=' + v.version ">${index ==0 ? 'Lastest Version':v.version}</a>
                    </Dropdown-Item>
                    {#                    <Dropdown-Item ><a style="color: #495060;font-size: 12px!important" href="">dddd</a></Dropdown-Item>#}
                </Dropdown-Menu>
            </Dropdown>
        </div>


        <div class="center">
            <div style="width: 80%;">
                <div style="color: white;width: 80%;font-size: 14px;margin-left: 15%">
                    BENCHMARKING FRAMEWORK
                </div>
                <div style="color: white;width: 80%;font-size: 68px;margin-left: 15%">
                    Welcome to Caliper
                </div>
            </div>
            <div style="width:300px;display: flex;flex-direction: column;">
                <i-button type="success" size="large" long>Go</i-button>
                <i-button type="text" style="color: white;align-self: flex-end;font-size: 14px">Register</i-button>
            </div>
        </div>
    </div>
</div>
{#
</div>

</div>
<script>
    vm = new Vue({
        el: "#app",
        data: {
            versions:{{ versions|safe }}
        },
        methods: {
            download: function (name) {
                const url = 'user/download?version=' + name;
                const link = document.createElement('a');
                link.href = url;
                document.body.appendChild(link);
                link.click();

                {#                data = {"version": name};#}
                {#                axios.post('user/download', data)#}
                {#                    .then(function (response) {#}
                {#                        const url = window.URL.createObjectURL(new Blob([response.data]));#}
                {#                        const link = document.createElement('a');#}
                {#                        link.href = url;#}
                {#                        link.setAttribute('download', 'file.pdf');#}
                {#                        document.body.appendChild(link);#}
                {#                        link.click();#}
                {#                    })#}
                {#                    .catch(function (error) {#}
                {#                        console.log(error);#}
                {#                        vm.$Message.error(error);#}
                {#                    });#}
            }

        }
    });

</script>


</body>

</html>
